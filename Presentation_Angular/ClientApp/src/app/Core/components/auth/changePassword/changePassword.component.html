<form
  class="col-md-8"
  [formGroup]="passwordForm"
  #formDirective="ngForm"
  (ngSubmit)="changePassword(passwordForm.value, formDirective)">
  <mat-form-field class="my-form-full-width mb-2">
    <mat-label>Current password</mat-label>
    <input matInput type="password" formControlName="oldPassword"/>
    <mat-error *ngIf="form.oldPassword.hasError('required')">
      Required
    </mat-error>
  </mat-form-field>

  <mat-form-field class="my-form-full-width mb-2">
    <mat-label>New Password</mat-label>
    <input matInput type="password" formControlName="newPassword"/>
    <mat-error *ngIf="form.newPassword.hasError('required')">
      Required
    </mat-error
    >
    <mat-error *ngIf="form.newPassword.hasError('minlength')">
      Min 8 characters
    </mat-error
    >
    <mat-error *ngIf="form.newPassword.hasError('maxlength')">
      Max 100 characters
    </mat-error
    >
    <mat-error
      *ngIf="form.newPassword.hasError('invalidPassword')">
      Password must contain at least 1 lowercase, 1 uppercase, 1 number & 1
      special character
    </mat-error
    >
  </mat-form-field>

  <mat-form-field class="my-form-full-width">
    <mat-label>Confirm New Password</mat-label>
    <input
      matInput
      formControlName="confirmPassword"
      type="password"
      required/>
    <mat-error
      *ngIf="form.confirmPassword.hasError('required')">
      Required
    </mat-error>
  </mat-form-field>
  <mat-error
    *ngIf="
      form.confirmPassword.touched &&
      passwordForm.hasError('passwordMismatch')
    ">
    Confirm password doesn't match
  </mat-error
  >

  <button
    mat-raised-button
    class="my-form-full-width"
    color="primary"
    [disabled]="passwordForm.invalid">
    Update password
  </button>
</form>
